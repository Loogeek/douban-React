var Music=require("../../models/music/music"),MusicCategory=require("../../models/music/musicCategory"),Programme=require("../../models/music/programme");exports.index=function(e,s){var o=e.query.albumName,i=e.query.hotProName,c=e.query.hotSongs;o?MusicCategory.findOne({name:o}).populate({path:"musics",select:"title image singer"}).exec(function(e,o){e&&console.log(e),s.json({data:o})}):i?Programme.findOne({name:i}).populate({path:"musicCategories",select:"name musics"}).exec(function(e,o){e&&console.log(e),Music.find({}).exec(function(e,i){s.json({dataCars:o,dataMusics:i})})}):c?MusicCategory.findOne({name:c}).populate({path:"musics",select:"title image singer pv"}).exec(function(e,o){e&&console.log(e),s.json({data:o})}):MusicCategory.find({}).populate("musics").exec(function(e,o){e&&console.log(e),Programme.find({}).populate({path:"musicCategories",select:"name musics"}).exec(function(e,i){e&&console.log(e),s.render("music/musicindex",{title:"豆瓣音乐首页",musicCategories:o,programmes:i})})})};