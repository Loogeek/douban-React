$(function(){(function(){var t=1,i=$("#m-galleryFrames .glyphicon-chevron-right"),e=$("#m-galleryFrames .glyphicon-chevron-left"),a=$("#m-galleryFrames ul"),n=$("#m-galleryFrames").width(),r=$("#m-galleryFrames li").length;$("#m-galleryFrames .ui-side-max").html(r-2);for(var l=0;r>l;l++)$($("#m-galleryFrames img")[l]).width(n);$(window).resize(function(){n=$("#m-galleryFrames").width();for(var t=0;r>t;t++)$($("#m-galleryFrames img")[t]).width(n);console.log(n,$($("#m-galleryFrames img")[0]).width())}),i.on("click",function(){s("right")}),e.on("click",function(){s("left")});var m=setInterval(function(){s("right")},5e3);$("#m-galleryFrames").on("mouseover",function(){clearTimeout(m)}).on("mouseout",function(){m=setInterval(function(){s("right")},5e3)});var s=function(i){a.is(":animated")||("right"===i?(t++,$("#m-galleryFrames .ui-side-index").html(t),a.animate({left:"-="+n},700),t===r-1&&(t=1,$("#m-galleryFrames .ui-side-index").html(t),a.animate({left:"-605px"},0))):(t--,$("#m-galleryFrames .ui-side-index").html(t),a.animate({left:"+="+n},700),0===t&&(t=r-2,$("#m-galleryFrames .ui-side-index").html(t),a.animate({left:"-2312px"},0))))}})(),function(){function t(t){var a=(s-1)*r,n=$("#editorFeatured .ui-side-index");i.is(":animated")||("right"===t?e===s?(e=1,n.html(e),i.animate({left:0},700)):(e++,n.html(e),i.animate({left:"-="+r},700)):1===e?(e=s,n.html(e),i.animate({left:"-="+a},700)):(e--,n.html(e),i.animate({left:"+="+r},700)))}var i=$("#editorFeatured .m-screenBody"),e=1,a=$("#editorFeatured .glyphicon-chevron-right"),n=$("#editorFeatured .glyphicon-chevron-left"),r=i.width(),l=$("#editorFeatured .thumbnail"),m=l.length,s=Math.ceil(m/3);$("#editorFeatured .ui-side-max").html(s),i.width(r*s),a.on("click",function(){t("right")}),n.on("click",function(){t("left")});var o=setInterval(function(){t("right")},5e3);$("#editorFeatured").on("mouseover",function(){clearInterval(o)}).on("mouseout",function(){o=setInterval(function(){t("right")},5e3)})}();$("#newAlbums").on("click","li",function(){if(!$(this).is(".on")){var i=$(this).text(),e="/musicindex?albumName="+encodeURIComponent("新碟榜"+i);t(e,"GET",function(t){var i=t.data.musics,e=$("#newAlbums .thumbnail");if(i.length<e.length){var a=i.length-1;$("#newAlbums .thumbnail:gt("+a+")").remove();for(var n=0;n<i.length;n++){$(e[n]).find("a").attr("href",i[n]._id),$(e[n]).find("h5").html(i[n].title);var r=$(e[n]).find("img");i[n].image.indexOf("http:")>-1?r.attr("src",i[n].image).attr("alt",i[n].image):r.attr("src","/upload/"+i[n].image).attr("alt",i[n].image)}}else{for(var l=0;l<=e.length;l++){$(e[l]).find("a").attr("href",i[l]._id),$(e[l]).find("h5").html(i[l].title);var m=$(e[l]).find("img");i[l].image.indexOf("http:")>-1?m.attr("src",i[l].image).attr("alt",i[l].image):m.attr("src","/upload/"+i[l].image).attr("alt",i[l].image)}for(var s=e.length;s<i.length;s++)$("#newAlbums").append('<div><div class="thumbnail"><a href="/music/'+i[s]._id+'"></a><div class="caption"><h5>'+i[s].title+"</h5></div></div></div>"),i[s].image.indexOf("http:")>-1?$("#newAlbums .thumbnail:eq("+s+") a").append("<img src="+i[s].image+" alt="+i[s].title+">"):$("#newAlbums .thumbnail:eq("+s+") a").append("<img src=/upload/"+i[s].image+" alt="+i[s].title+">")}}),$(this).addClass("on").siblings("li").removeClass("on")}}),$("#HotProgrammes").on("click","li",function(){if(!$(this).is(".on")){var i=$(this).text(),e="/musicindex?hotProName="+encodeURIComponent("近期热门歌单"+i);t(e,"GET",function(t){var i=t.dataCars.musicCategories,e=t.dataMusics,a=$("#HotProgrammes .thumbnail");if(i.length<a.length){var n=i.length-1;$("#HotProgrammes .thumbnail:gt("+n+")").remove();for(var r=0;r<i.length;r++){var l=$(a[r]).find("p").length;$(a[r]).find("h5").html(i[r].name),i[r].musics.length<l?$(a[r]).find("p:gt"+(i[r].musics.length-1)+")").remove():$(a[r]).append("p"+(l+1)+"."+i[r].musics.title);for(var m=$(a[r]).find("img"),s=0;s<i[r].musics.length;s++)for(var o=0;o<e.length;o++)if(i[r].musics[0]===e[o]._id&&(e[o].image.indexOf("http:")>-1?m.attr("src",e[o].image).attr("alt",e[o].image):m.attr("src","/upload/"+e[o].image).attr("alt",e[o].image)),i[r].musics[s]===e[o]._id){var g=s+1;$("#HotProgrammes p:eq("+s+")").text(g+"."+e[o].title)}}}else for(var h=0;h<a.length;h++){$(a[h]).find("h5").html(i[h].name);for(var d=$(a[h]).find("img"),c=0;c<i[h].musics.length;c++)for(var f=0;f<e.length;f++)if(i[h].musics[0]===e[f]._id&&(e[f].image.indexOf("http:")>-1?d.attr("src",e[f].image).attr("alt",e[f].image):d.attr("src","/upload/"+e[f].image).attr("alt",e[f].image)),i[h].musics[c]===e[f]._id){var u=c+1;$("#HotProgrammes p:eq("+c+")").text(u+"."+e[f].title)}}}),$(this).addClass("on").siblings("li").removeClass("on")}}),$("#HotArtistSongs").on("click","li",function(){if(!$(this).is(".on")){var i=$(this).text(),e="/musicindex?hotSongs="+encodeURIComponent("本周单曲榜"+i);t(e,"GET",function(t){var i=t.data.musics,e=$(".hotArtistSongs li");if(i.length<e.length){var a=i.length-1;$(".hotArtistSongs li:gt("+a+")").remove();for(var n=0;n<i.length;n++){$(e[n]).find("a").attr("href","/music/"+i[n]._id),$(e[n]).find("h5").html(i[n].title),$(e[n]).find("p").html(i[n].singer+"&nbsp;/&nbsp;"+i[n].pv+"次播放"),$(e[n]).find("span").html(n+1);var r=$(e[n]).find("img");i[n].image.indexOf("http:")>-1?r.attr("src",i[n].image).attr("alt",i[n].image):r.attr("src","/upload/"+i[n].image).attr("alt",i[n].image)}}else{for(var l=0;l<=e.length;l++){$(e[l]).find("a").attr("href","/music/"+i[l]._id),$(e[l]).find("h5").html(i[l].title),$(e[l]).find("p").html(i[l].singer+"&nbsp;/&nbsp;"+i[l].pv+"次播放"),$(e[l]).find("span").html(l+1);var m=$(e[l]).find("img");i[l].image.indexOf("http:")>-1?m.attr("src",i[l].image).attr("alt",i[l].image):m.attr("src","/upload/"+i[l].image).attr("alt",i[l].image)}for(var s=Math.min(10,i.length),o=e.length;s>o;o++)$(".hotArtistSongs ul").append('<li><a href="/music/'+i[o]._id+'"></a><h5>'+i[o].title+"</h5><p>"+i[l].singer+"&nbsp;/&nbsp;"+i[l].pv+'次播放</p><span class="order">'+(o+1)+"</span></li>"),i[o].image.indexOf("http:")>-1?$(".hotArtistSongs li:eq("+o+") a").append("<img src="+i[o].image+" alt="+i[o].title+">"):$(".hotArtistSongs li:eq("+o+") a").append("<img src=/upload/"+i[o].image+" alt="+i[o].title+">")}}),$(this).addClass("on").siblings("li").removeClass("on")}});var t=function(t,i,e){$.ajax({url:t,cache:!0,type:i,crossDomain:!0}).done(e)}});