$(function(){function t(t,e,r){$(t).validate({rules:{"user[name]":{required:!0,minlength:e,maxlength:r},"user[password]":{required:!0,minlength:e,maxlength:r}},messages:{"user[name]":{required:"必须填写用户名",minlength:"用户名最小"+e+"位",maxlength:"用户名最大"+r+"位"},"user[password]":{required:"必须填写密码",minlength:"密码最小"+e+"位",maxlength:"密码最大"+r+"位"}}})}function e(t,e,r,a){$.ajax({url:e,type:r,data:{"user[name]":$(t).find("input:eq(0)").val(),"user[password]":$(t).find("input:eq(1)").val()}}).done(a)}t("#signinForm",2,15),$("#signinForm").submit(function(t){t.preventDefault(),e(this,"/user/signin","POST",function(t){switch(t.data){case 0:$("#signinForm .err_tip").html("用户不存在").attr("style","block");break;case 1:$("#signinForm .err_tip").html("账号或密码错误").attr("style","block");break;default:(function(){$("#signinModal").attr("style","none"),$("body").removeClass("modal-open").removeAttr("style"),$(".modal-backdrop").remove(),$(".navbar-text a:eq(0)").html("欢迎您:"+$("#signinModal input:eq(0)").val()).removeAttr("data-target").removeAttr("data-toggle"),$(".navbar-text a:eq(1)").html("登出").attr("href","/logout").removeAttr("data-target").removeAttr("data-toggle")})()}})}),t("#signupForm",2,15),$("#signupForm").submit(function(t){t.preventDefault(),e(this,"/user/signup","POST",function(t){0===t.data?$("#signupForm .err_tip").html("用户已存在").attr("style","block"):($("#signupModal").attr("style","none"),$("body").removeClass("modal-open").removeAttr("style"),$(".modal-backdrop").remove(),$(".navbar-text a:eq(0)").html("欢迎您:"+$("#signupModal input:eq(0)").val()).removeAttr("data-target").removeAttr("data-toggle"),$(".navbar-text a:eq(1)").html("登出").attr("href","/logout").removeAttr("data-target").removeAttr("data-toggle"))})}),t("#dSigninForm",2,15),$("#dSigninForm").submit(function(t){t.preventDefault(),e(this,"/user/signin","POST",function(t){switch(t.data){case 0:$("#dSigninForm .err_tip").html("用户不存在").attr("style","block");break;case 1:$("#dSigninForm .err_tip").html("账号或密码错误").attr("style","block");break;default:$("a")[0].click()}})}),t("#dSignupForm",2,15),$("#dSignupForm").submit(function(t){t.preventDefault(),e(this,"/user/signup","POST",function(t){0===t.data?$("#dSignupForm .err_tip").html("用户已存在").attr("style","block"):$("a")[0].click()})})});