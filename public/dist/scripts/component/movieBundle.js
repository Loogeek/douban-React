webpackJsonp([0],{0:function(e,t,n){n(1),e.exports=n(160)},1:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.FliterTitle=t.FliterMovieItem=t.FliterMovies=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(2),c=i(o),u=n(159),d=i(u),f=t.FliterMovies=function(e){function t(e){a(this,t);var n=l(this,Object.getPrototypeOf(t).call(this,e));return n.state={selected:"热门",loading:!0,data:[],filmTitle:["热门","最新","经典","豆瓣高分","冷片佳作","华语","欧美","韩国","日本","动作","喜剧"]},n}return r(t,e),s(t,[{key:"render",value:function(){var e=this,t=[];if(!this.state.loading){var n=this.state.data;n&&n.movies&&n.movies.forEach(function(e,n){t.push(c["default"].createElement(m,{data:e,key:n}))})}return c["default"].createElement("div",{className:"screen"},c["default"].createElement("div",{className:"class-top"},c["default"].createElement("span",{className:"active"},"选电影"),c["default"].createElement("i",null," / "),c["default"].createElement("span",null,"选电视剧"),c["default"].createElement("hr",null),c["default"].createElement(h,{filmTitle:this.state.filmTitle,selected:this.state.selected,onDataChange:function(t){return e.getData(t)}}),c["default"].createElement("hr",null)),c["default"].createElement("div",{className:"screen"},c["default"].createElement("div",{className:"panel panel-default"},c["default"].createElement("div",{id:"classNameBody",className:"panel-body screen-body"},t))))}},{key:"componentDidMount",value:function(){var e=this.state.selected;this.getData(e)}},{key:"getData",value:function(e){var t=this,n=this.props.source+encodeURIComponent(e+"电影");$.get(n,function(n){t.setState({loading:!1,selected:e,data:n.data})})}}]),t}(c["default"].Component),m=t.FliterMovieItem=function(e){function t(){return a(this,t),l(this,Object.getPrototypeOf(t).apply(this,arguments))}return r(t,e),s(t,[{key:"render",value:function(){return c["default"].createElement("div",{className:"col-md-3 col-xs-4"},c["default"].createElement("div",{className:"thumbnail"},c["default"].createElement("a",{href:/movie/+this.props.data._id,target:"_blank"},c["default"].createElement("img",{src:this.props.data.poster,alt:this.props.data.title})),c["default"].createElement("div",{className:"caption"},c["default"].createElement("h5",null,this.props.data.title))))}}]),t}(c["default"].Component),h=t.FliterTitle=function(e){function t(e){return a(this,t),l(this,Object.getPrototypeOf(t).call(this,e))}return r(t,e),s(t,[{key:"render",value:function(){var e=this,t=this.props.selected,n=this.props.filmTitle,i=[];return n.forEach(function(n,a){i.push(c["default"].createElement("li",{key:a},c["default"].createElement("button",{className:t===n?"btn btn-primary":"btn btn-default",key:a,onClick:function(t){return e.handleTitleChang(n)}},n)))}),c["default"].createElement("ul",null,i)}},{key:"handleTitleChang",value:function(e){this.props.selected!==e&&this.props.onDataChange(e)}}]),t}(c["default"].Component);d["default"].render(c["default"].createElement(f,{source:"/?fliterName="}),document.getElementById("fliterMovies"))},160:function(e,t){"use strict";$(function(){var e=$(".col-md-6").width(),t=(function(){function n(t){var n=(c-1)*e;$("#screenBody").is(":animated")||("right"===t?a===c?(a=1,$("#scrollMoives .side-index").html(a),$("#screenBody").animate({left:0},500)):(a++,$("#scrollMoives .side-index").html(a),$("#screenBody").animate({left:"-="+e},500)):1===a?(a=c,$("#scrollMoives .side-index").html(a),$("#screenBody").animate({left:"-="+n},500)):(a--,$("#scrollMoives .side-index").html(a),$("#screenBody").animate({left:"+="+e},500)))}var i=($("#scrollMoives .panel"),$("#headerNow span")),a=1,l=$("#scrollMoives .slide-prev"),r=$("#scrollMoives .slide-next"),s=$("#scrollMoives .thumbnail"),o=s.length,c=Math.ceil(o/4);$("#scrollMoives .side-max").html(c),$("#screenBody").width(e*c);var u=s.outerWidth(!0)-s.outerWidth(),d=(e-4*u)/4;s.width(d),i.on("click",function(){var n=$(this).text(),l="/?galleryName="+encodeURIComponent(n);t(l,"GET",function(t){var l=t.data||[],r=l.movies,u=l.movies.length;if($("#headerNow a").attr("href","/movie/results?cat="+l._id+"&p=0").text(l.name),"即将上映"===n?i.text("正在上映"):i.text("即将上映"),u<s.length)$("#scrollMoives .thumbnail:gt("+u+")").remove();else if(u>s.length){for(var f=s.length;u>f;f++)$("#screenBody").append('<div class="thumbnail"><a href="" target="_blank"><img src="" alt="" /></a><div class="caption"><h5></h5><p><a class="btn btn-primary" href="" role="button">观看预告片</a></p></div></div>');$("#screenBody .thumbnail:gt("+(s.length-1)+")").width(d)}s=$("#scrollMoives .thumbnail"),o=s.length,c=Math.ceil(o/4),$("#scrollMoives .side-max").html(c),$("#screenBody").width(e*c);for(var m=0;m<s.length;m++)if(r[m]){$(s[m]).find("a").attr("href","/movie/"+r[m]._id),$(s[m]).find("h5").html(r[m].title);var h=$(s[m]).find("img");r[m].poster&&(r[m].poster.indexOf("http:")>-1?h.attr("src",r[m].poster).attr("alt",r[m].poster):h.attr("src","/upload/"+r[m].poster).attr("alt",r[m].poster))}a>c&&(a=c,$("#scrollMoives .side-index").html(a),$("#screenBody").animate({left:-e*(a-1)},0))})}),r.on("click",function(){n("right")}),l.on("click",function(){n("left")});var f=setInterval(function(){n("right")},5e3);$("#scrollMoives").on("mouseover",function(){clearInterval(f)}).on("mouseout",function(){f=setInterval(function(){n("right")},5e3)})}(),function(){var t=1,n=$("#galleryFrames .slide-prev"),i=$("#galleryFrames .slide-next"),a=$("#galleryFrames li").length,l=$("#galleryFrames ul"),r=$("#galleryFrames .slide-item");$("#galleryFrames .side-max").html(a-2),l.width(e*a),l.css("left",-e),r.width(e),i.on("click",function(){o("right")}),n.on("click",function(){o("left")});var s=setInterval(function(){o("right")},5e3);$("#galleryFrames").on("mouseover",function(){clearTimeout(s)}).on("mouseout",function(){s=setInterval(function(){o("right")},5e3)});var o=function(n){l.is(":animated")||("right"===n?(t++,$("#galleryFrames .side-index").html(t),l.animate({left:"-="+e},500),t===a-1&&(t=1,$("#galleryFrames .side-index").html(t),l.animate({left:-e+"px"},0))):(t--,$("#galleryFrames .side-index").html(t),l.animate({left:"+="+e},500),0===t&&(t=a-2,$("#galleryFrames .side-index").html(t),l.animate({left:-(e*(a-2))+"px"},0))))}}(),function(){var e=$("#citySearch"),n=$("#citiesList"),i=$("#citySug"),a=$("#citySug .city-suggestion-list"),l=$("#citySug .auto-tip"),r=$("#citySug input");n.outerWidth(e.width()+i.width()),e.children("span").on("click",function(){"none"===n.css("display")?n.css("display","block"):n.css("display","none")}),$(".cities-list-hd").on("click","li",function(){var e=$(this).attr("index");$(this).addClass("on").siblings().removeClass("on"),n.find(".cities-list-item").eq(e-1).addClass("active").siblings().removeClass("active")}),$("#citiesList .cities-list-item").on("click","a",function(){e.children("span").html($(this).html()),n.css("display","none"),r.val("")}),r.on("focus",function(){s(),n.css("display","none")}),r.keyup(function(e){(49<e.keyCode&&e.keyCode<57||32===e.keyCode||8===e.keyCode)&&s()}),a.on("mousedown","a",function(){r.val($(this).html()),a.css("display","none")}),r.on("blur",function(){a.css("display","none")});var s=function(){var n=e.children("span").text(),i=r.val(),s="/?cityName="+encodeURIComponent(n)+"&&search="+encodeURIComponent(i);t(s,"GET",function(e){var t=e||[];l.html("");for(var n=0;n<t.length;n++)l.append('<li><a href="javascript:;">'+t[n]+"</a></li>");a.css("display","block")})}}(),function(e,t,n){$.ajax({url:e,cache:!0,type:t,crossDomain:!0}).done(n)})})}});